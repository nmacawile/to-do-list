!function(e){var t={};function a(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,a),o.l=!0,o.exports}a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)a.d(n,o,function(t){return e[t]}.bind(null,o));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=1)}([function(e,t,a){var n,o;/*! Sortable 1.7.0 - MIT | git://github.com/rubaxa/Sortable.git */!function(r){"use strict";void 0===(o="function"==typeof(n=function(){if("undefined"==typeof window||!window.document)return function(){throw new Error("Sortable.js requires a window with a document")};var e,t,a,n,o,r,i,s,l,c,d,u,p,h,f,g,v,m,b,y,_,k={},D=/\s+/g,w=/left|right|inline/,S="Sortable"+(new Date).getTime(),C=window,E=C.document,T=C.parseInt,x=C.setTimeout,j=C.jQuery||C.Zepto,P=C.Polymer,O=!1,I="draggable"in E.createElement("div"),N=!navigator.userAgent.match(/(?:Trident.*rv[ :]?11\.|msie)/i)&&((_=E.createElement("x")).style.cssText="pointer-events:auto","auto"===_.style.pointerEvents),M=!1,L=Math.abs,A=Math.min,B=[],Y=[],R=function(){return!1},X=ne(function(e,t,a){if(a&&t.scroll){var n,o,r,i,d,u,p=a[S],h=t.scrollSensitivity,f=t.scrollSpeed,g=e.clientX,v=e.clientY,m=window.innerWidth,y=window.innerHeight;if(l!==a&&(s=t.scroll,l=a,c=t.scrollFn,!0===s)){s=a;do{if(s.offsetWidth<s.scrollWidth||s.offsetHeight<s.scrollHeight)break}while(s=s.parentNode)}s&&(n=s,o=s.getBoundingClientRect(),r=(L(o.right-g)<=h)-(L(o.left-g)<=h),i=(L(o.bottom-v)<=h)-(L(o.top-v)<=h)),r||i||(i=(y-v<=h)-(v<=h),((r=(m-g<=h)-(g<=h))||i)&&(n=C)),k.vx===r&&k.vy===i&&k.el===n||(k.el=n,k.vx=r,k.vy=i,clearInterval(k.pid),n&&(k.pid=setInterval(function(){u=i?i*f:0,d=r?r*f:0,"function"==typeof c&&"continue"!==c.call(p,d,u,e,b,n)||(n===C?C.scrollTo(C.pageXOffset+d,C.pageYOffset+u):(n.scrollTop+=u,n.scrollLeft+=d))},24)))}},30),H=function(e){function t(e,t){return null!=e&&!0!==e||null!=(e=a.name)?"function"==typeof e?e:function(a,n){var o=n.options.group.name;return t?e:e&&(e.join?e.indexOf(o)>-1:o==e)}:R}var a={},n=e.group;n&&"object"==typeof n||(n={name:n}),a.name=n.name,a.checkPull=t(n.pull,!0),a.checkPut=t(n.put),a.revertClone=n.revertClone,e.group=a};try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){O={capture:!1,passive:!1}}}))}catch(e){}function F(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be HTMLElement, and not "+{}.toString.call(e);this.el=e,this.options=t=oe({},t),e[S]=this;var a={group:null,sort:!0,disabled:!1,store:null,handle:null,scroll:!0,scrollSensitivity:30,scrollSpeed:10,draggable:/[uo]l/i.test(e.nodeName)?"li":">*",ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==F.supportPointer};for(var n in a)!(n in t)&&(t[n]=a[n]);for(var o in H(t),this)"_"===o.charAt(0)&&"function"==typeof this[o]&&(this[o]=this[o].bind(this));this.nativeDraggable=!t.forceFallback&&I,U(e,"mousedown",this._onTapStart),U(e,"touchstart",this._onTapStart),t.supportPointer&&U(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(U(e,"dragover",this),U(e,"dragenter",this)),Y.push(this._onDragOver),t.store&&this.sort(t.store.get(this))}function J(t,a){"clone"!==t.lastPullMode&&(a=!0),n&&n.state!==a&&(Q(n,"display",a?"none":""),a||n.state&&(t.options.group.revertClone?(o.insertBefore(n,r),t._animate(e,n)):o.insertBefore(n,e)),n.state=a)}function $(e,t,a){if(e){a=a||E;do{if(">*"===t&&e.parentNode===a||ae(e,t))return e}while(e=(o=(n=e).host)&&o.nodeType?o:n.parentNode)}var n,o;return null}function U(e,t,a){e.addEventListener(t,a,O)}function W(e,t,a){e.removeEventListener(t,a,O)}function q(e,t,a){if(e)if(e.classList)e.classList[a?"add":"remove"](t);else{var n=(" "+e.className+" ").replace(D," ").replace(" "+t+" "," ");e.className=(n+(a?" "+t:"")).replace(D," ")}}function Q(e,t,a){var n=e&&e.style;if(n){if(void 0===a)return E.defaultView&&E.defaultView.getComputedStyle?a=E.defaultView.getComputedStyle(e,""):e.currentStyle&&(a=e.currentStyle),void 0===t?a:a[t];t in n||(t="-webkit-"+t),n[t]=a+("string"==typeof a?"":"px")}}function V(e,t,a){if(e){var n=e.getElementsByTagName(t),o=0,r=n.length;if(a)for(;o<r;o++)a(n[o],o);return n}return[]}function z(e,t,a,o,r,i,s,l,c){e=e||t[S];var d=E.createEvent("Event"),u=e.options,p="on"+a.charAt(0).toUpperCase()+a.substr(1);d.initEvent(a,!0,!0),d.to=r||t,d.from=i||t,d.item=o||t,d.clone=n,d.oldIndex=s,d.newIndex=l,d.originalEvent=c,t.dispatchEvent(d),u[p]&&u[p].call(e,d)}function G(e,t,a,n,o,r,i,s){var l,c,d=e[S],u=d.options.onMove;return(l=E.createEvent("Event")).initEvent("move",!0,!0),l.to=t,l.from=e,l.dragged=a,l.draggedRect=n,l.related=o||t,l.relatedRect=r||t.getBoundingClientRect(),l.willInsertAfter=s,l.originalEvent=i,e.dispatchEvent(l),u&&(c=u.call(d,l,i)),c}function Z(e){e.draggable=!1}function K(){M=!1}function ee(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,a=t.length,n=0;a--;)n+=t.charCodeAt(a);return n.toString(36)}function te(e,t){var a=0;if(!e||!e.parentNode)return-1;for(;e&&(e=e.previousElementSibling);)"TEMPLATE"===e.nodeName.toUpperCase()||">*"!==t&&!ae(e,t)||a++;return a}function ae(e,t){if(e){if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t)}return!1}function ne(e,t){var a,n;return function(){void 0===a&&(a=arguments,n=this,x(function(){1===a.length?e.call(n,a[0]):e.apply(n,a),a=void 0},t))}}function oe(e,t){if(e&&t)for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a]);return e}function re(e){return P&&P.dom?P.dom(e).cloneNode(!0):j?j(e).clone(!0)[0]:e.cloneNode(!0)}function ie(e){return x(e,0)}function se(e){return clearTimeout(e)}return F.prototype={constructor:F,_onTapStart:function(t){var a,n=this,o=this.el,r=this.options,s=r.preventOnFilter,l=t.type,c=t.touches&&t.touches[0],d=(c||t).target,u=t.target.shadowRoot&&t.path&&t.path[0]||d,p=r.filter;if(function(e){B.length=0;for(var t=e.getElementsByTagName("input"),a=t.length;a--;){var n=t[a];n.checked&&B.push(n)}}(o),!e&&!(/mousedown|pointerdown/.test(l)&&0!==t.button||r.disabled)&&!u.isContentEditable&&(d=$(d,r.draggable,o))&&i!==d){if(a=te(d,r.draggable),"function"==typeof p){if(p.call(this,t,d,this))return z(n,u,"filter",d,o,o,a),void(s&&t.preventDefault())}else if(p&&(p=p.split(",").some(function(e){if(e=$(u,e.trim(),o))return z(n,e,"filter",d,o,o,a),!0})))return void(s&&t.preventDefault());r.handle&&!$(u,r.handle,o)||this._prepareDragStart(t,c,d,a)}},_prepareDragStart:function(a,n,s,l){var c,d=this,u=d.el,p=d.options,f=u.ownerDocument;s&&!e&&s.parentNode===u&&(m=a,o=u,t=(e=s).parentNode,r=e.nextSibling,i=s,g=p.group,h=l,this._lastX=(n||a).clientX,this._lastY=(n||a).clientY,e.style["will-change"]="all",c=function(){d._disableDelayedDrag(),e.draggable=d.nativeDraggable,q(e,p.chosenClass,!0),d._triggerDragStart(a,n),z(d,o,"choose",e,o,o,h)},p.ignore.split(",").forEach(function(t){V(e,t.trim(),Z)}),U(f,"mouseup",d._onDrop),U(f,"touchend",d._onDrop),U(f,"touchcancel",d._onDrop),U(f,"selectstart",d),p.supportPointer&&U(f,"pointercancel",d._onDrop),p.delay?(U(f,"mouseup",d._disableDelayedDrag),U(f,"touchend",d._disableDelayedDrag),U(f,"touchcancel",d._disableDelayedDrag),U(f,"mousemove",d._disableDelayedDrag),U(f,"touchmove",d._disableDelayedDrag),p.supportPointer&&U(f,"pointermove",d._disableDelayedDrag),d._dragStartTimer=x(c,p.delay)):c())},_disableDelayedDrag:function(){var e=this.el.ownerDocument;clearTimeout(this._dragStartTimer),W(e,"mouseup",this._disableDelayedDrag),W(e,"touchend",this._disableDelayedDrag),W(e,"touchcancel",this._disableDelayedDrag),W(e,"mousemove",this._disableDelayedDrag),W(e,"touchmove",this._disableDelayedDrag),W(e,"pointermove",this._disableDelayedDrag)},_triggerDragStart:function(t,a){(a=a||("touch"==t.pointerType?t:null))?(m={target:e,clientX:a.clientX,clientY:a.clientY},this._onDragStart(m,"touch")):this.nativeDraggable?(U(e,"dragend",this),U(o,"dragstart",this._onDragStart)):this._onDragStart(m,!0);try{E.selection?ie(function(){E.selection.empty()}):window.getSelection().removeAllRanges()}catch(e){}},_dragStarted:function(){if(o&&e){var t=this.options;q(e,t.ghostClass,!0),q(e,t.dragClass,!1),F.active=this,z(this,o,"start",e,o,o,h)}else this._nulling()},_emulateDragOver:function(){if(b){if(this._lastX===b.clientX&&this._lastY===b.clientY)return;this._lastX=b.clientX,this._lastY=b.clientY,N||Q(a,"display","none");var e=E.elementFromPoint(b.clientX,b.clientY),t=e,n=Y.length;if(e&&e.shadowRoot&&(t=e=e.shadowRoot.elementFromPoint(b.clientX,b.clientY)),t)do{if(t[S]){for(;n--;)Y[n]({clientX:b.clientX,clientY:b.clientY,target:e,rootEl:t});break}e=t}while(t=t.parentNode);N||Q(a,"display","")}},_onTouchMove:function(e){if(m){var t=this.options,n=t.fallbackTolerance,o=t.fallbackOffset,r=e.touches?e.touches[0]:e,i=r.clientX-m.clientX+o.x,s=r.clientY-m.clientY+o.y,l=e.touches?"translate3d("+i+"px,"+s+"px,0)":"translate("+i+"px,"+s+"px)";if(!F.active){if(n&&A(L(r.clientX-this._lastX),L(r.clientY-this._lastY))<n)return;this._dragStarted()}this._appendGhost(),y=!0,b=r,Q(a,"webkitTransform",l),Q(a,"mozTransform",l),Q(a,"msTransform",l),Q(a,"transform",l),e.preventDefault()}},_appendGhost:function(){if(!a){var t,n=e.getBoundingClientRect(),r=Q(e),i=this.options;q(a=e.cloneNode(!0),i.ghostClass,!1),q(a,i.fallbackClass,!0),q(a,i.dragClass,!0),Q(a,"top",n.top-T(r.marginTop,10)),Q(a,"left",n.left-T(r.marginLeft,10)),Q(a,"width",n.width),Q(a,"height",n.height),Q(a,"opacity","0.8"),Q(a,"position","fixed"),Q(a,"zIndex","100000"),Q(a,"pointerEvents","none"),i.fallbackOnBody&&E.body.appendChild(a)||o.appendChild(a),t=a.getBoundingClientRect(),Q(a,"width",2*n.width-t.width),Q(a,"height",2*n.height-t.height)}},_onDragStart:function(t,a){var r=this,i=t.dataTransfer,s=r.options;r._offUpEvents(),g.checkPull(r,r,e,t)&&((n=re(e)).draggable=!1,n.style["will-change"]="",Q(n,"display","none"),q(n,r.options.chosenClass,!1),r._cloneId=ie(function(){o.insertBefore(n,e),z(r,o,"clone",e)})),q(e,s.dragClass,!0),a?("touch"===a?(U(E,"touchmove",r._onTouchMove),U(E,"touchend",r._onDrop),U(E,"touchcancel",r._onDrop),s.supportPointer&&(U(E,"pointermove",r._onTouchMove),U(E,"pointerup",r._onDrop))):(U(E,"mousemove",r._onTouchMove),U(E,"mouseup",r._onDrop)),r._loopId=setInterval(r._emulateDragOver,50)):(i&&(i.effectAllowed="move",s.setData&&s.setData.call(r,i,e)),U(E,"drop",r),r._dragStartId=ie(r._dragStarted))},_onDragOver:function(i){var s,l,c,h,f,m,b=this.el,_=this.options,k=_.group,D=F.active,C=g===k,E=!1,T=_.sort;if(void 0!==i.preventDefault&&(i.preventDefault(),!_.dragoverBubble&&i.stopPropagation()),!e.animated&&(y=!0,D&&!_.disabled&&(C?T||(h=!o.contains(e)):v===this||(D.lastPullMode=g.checkPull(this,D,e,i))&&k.checkPut(this,D,e,i))&&(void 0===i.rootEl||i.rootEl===this.el))){if(X(i,_,this.el),M)return;if(s=$(i.target,_.draggable,b),l=e.getBoundingClientRect(),v!==this&&(v=this,E=!0),h)return J(D,!0),t=o,void(n||r?o.insertBefore(e,n||r):T||o.appendChild(e));if(0===b.children.length||b.children[0]===a||b===i.target&&(f=i,m=b.lastElementChild.getBoundingClientRect(),f.clientY-(m.top+m.height)>5||f.clientX-(m.left+m.width)>5)){if(0!==b.children.length&&b.children[0]!==a&&b===i.target&&(s=b.lastElementChild),s){if(s.animated)return;c=s.getBoundingClientRect()}J(D,C),!1!==G(o,b,e,l,s,c,i)&&(e.contains(b)||(b.appendChild(e),t=b),this._animate(l,e),s&&this._animate(c,s))}else if(s&&!s.animated&&s!==e&&void 0!==s.parentNode[S]){d!==s&&(d=s,u=Q(s),p=Q(s.parentNode));var j=(c=s.getBoundingClientRect()).right-c.left,P=c.bottom-c.top,O=w.test(u.cssFloat+u.display)||"flex"==p.display&&0===p["flex-direction"].indexOf("row"),I=s.offsetWidth>e.offsetWidth,N=s.offsetHeight>e.offsetHeight,L=(O?(i.clientX-c.left)/j:(i.clientY-c.top)/P)>.5,A=s.nextElementSibling,B=!1;if(O){var Y=e.offsetTop,R=s.offsetTop;B=Y===R?s.previousElementSibling===e&&!I||L&&I:s.previousElementSibling===e||e.previousElementSibling===s?(i.clientY-c.top)/P>.5:R>Y}else E||(B=A!==e&&!N||L&&N);var H=G(o,b,e,l,s,c,i,B);!1!==H&&(1!==H&&-1!==H||(B=1===H),M=!0,x(K,30),J(D,C),e.contains(b)||(B&&!A?b.appendChild(e):s.parentNode.insertBefore(e,B?A:s)),t=e.parentNode,this._animate(l,e),this._animate(c,s))}}},_animate:function(e,t){var a=this.options.animation;if(a){var n=t.getBoundingClientRect();1===e.nodeType&&(e=e.getBoundingClientRect()),Q(t,"transition","none"),Q(t,"transform","translate3d("+(e.left-n.left)+"px,"+(e.top-n.top)+"px,0)"),t.offsetWidth,Q(t,"transition","all "+a+"ms"),Q(t,"transform","translate3d(0,0,0)"),clearTimeout(t.animated),t.animated=x(function(){Q(t,"transition",""),Q(t,"transform",""),t.animated=!1},a)}},_offUpEvents:function(){var e=this.el.ownerDocument;W(E,"touchmove",this._onTouchMove),W(E,"pointermove",this._onTouchMove),W(e,"mouseup",this._onDrop),W(e,"touchend",this._onDrop),W(e,"pointerup",this._onDrop),W(e,"touchcancel",this._onDrop),W(e,"pointercancel",this._onDrop),W(e,"selectstart",this)},_onDrop:function(i){var s=this.el,l=this.options;clearInterval(this._loopId),clearInterval(k.pid),clearTimeout(this._dragStartTimer),se(this._cloneId),se(this._dragStartId),W(E,"mouseover",this),W(E,"mousemove",this._onTouchMove),this.nativeDraggable&&(W(E,"drop",this),W(s,"dragstart",this._onDragStart)),this._offUpEvents(),i&&(y&&(i.preventDefault(),!l.dropBubble&&i.stopPropagation()),a&&a.parentNode&&a.parentNode.removeChild(a),o!==t&&"clone"===F.active.lastPullMode||n&&n.parentNode&&n.parentNode.removeChild(n),e&&(this.nativeDraggable&&W(e,"dragend",this),Z(e),e.style["will-change"]="",q(e,this.options.ghostClass,!1),q(e,this.options.chosenClass,!1),z(this,o,"unchoose",e,t,o,h,null,i),o!==t?(f=te(e,l.draggable))>=0&&(z(null,t,"add",e,t,o,h,f,i),z(this,o,"remove",e,t,o,h,f,i),z(null,t,"sort",e,t,o,h,f,i),z(this,o,"sort",e,t,o,h,f,i)):e.nextSibling!==r&&(f=te(e,l.draggable))>=0&&(z(this,o,"update",e,t,o,h,f,i),z(this,o,"sort",e,t,o,h,f,i)),F.active&&(null!=f&&-1!==f||(f=h),z(this,o,"end",e,t,o,h,f,i),this.save()))),this._nulling()},_nulling:function(){o=e=t=a=r=n=i=s=l=m=b=y=f=d=u=v=g=F.active=null,B.forEach(function(e){e.checked=!0}),B.length=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragover":case"dragenter":e&&(this._onDragOver(t),function(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.preventDefault()}(t));break;case"mouseover":this._onDrop(t);break;case"selectstart":t.preventDefault()}},toArray:function(){for(var e,t=[],a=this.el.children,n=0,o=a.length,r=this.options;n<o;n++)$(e=a[n],r.draggable,this.el)&&t.push(e.getAttribute(r.dataIdAttr)||ee(e));return t},sort:function(e){var t={},a=this.el;this.toArray().forEach(function(e,n){var o=a.children[n];$(o,this.options.draggable,a)&&(t[e]=o)},this),e.forEach(function(e){t[e]&&(a.removeChild(t[e]),a.appendChild(t[e]))})},save:function(){var e=this.options.store;e&&e.set(this)},closest:function(e,t){return $(e,t||this.options.draggable,this.el)},option:function(e,t){var a=this.options;if(void 0===t)return a[e];a[e]=t,"group"===e&&H(a)},destroy:function(){var e=this.el;e[S]=null,W(e,"mousedown",this._onTapStart),W(e,"touchstart",this._onTapStart),W(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(W(e,"dragover",this),W(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(e){e.removeAttribute("draggable")}),Y.splice(Y.indexOf(this._onDragOver),1),this._onDrop(),this.el=e=null}},U(E,"touchmove",function(e){F.active&&e.preventDefault()}),F.utils={on:U,off:W,css:Q,find:V,is:function(e,t){return!!$(e,t,e)},extend:oe,throttle:ne,closest:$,toggleClass:q,clone:re,index:te,nextTick:ie,cancelNextTick:se},F.create=function(e,t){return new F(e,t)},F.version="1.7.0",F})?n.call(t,a,t,e):n)||(e.exports=o)}()},function(e,t,a){"use strict";a.r(t);var n=(()=>{const e=e=>document.querySelector(e),t=e=>document.createTextNode(e),a=(e,t)=>{n(e,t),o(e,t.id),i(e,t.classes),r(e,t.text)},n=(e,t)=>{Object.entries(t).forEach(([t,a])=>{"classes"!==t&&"text"!==t&&"id"!==t&&(e[t]=a)})},o=(e,t)=>{t&&(e.id=t)},r=(e,a)=>{a&&e.appendChild(t(a))},i=(e,t)=>{if(t&&Array.isArray(t))e.classList.add(...t);else if(t&&"string"==typeof t){let a=t.split(" ");e.classList.add(...a)}};return{find:e,findAll:e=>document.querySelectorAll(e),findAncestor:(e,t)=>{let a=e;for(;a.parentElement&&!a.classList.contains(t);)a=a.parentElement;return a},createText:t,create:(e,t={id:null,classes:null,text:null})=>{let n=document.createElement(e);return t&&a(n,t),n},attachEvent:(t,a,n="click",o=!1)=>{o?document.addEventListener(n,e=>{e.target&&e.target.classList.contains(t.substring(1,t.length))&&a(e)}):e(t).addEventListener(n,a)}}})();var o=(()=>{const e=e=>{let t=n.find(e);setTimeout(()=>{t.style.display="none"},200),t.classList.add("hidden")},t=()=>{const e=n.find("#priority-value");e.textContent="Normal",e.className="normal-prio-color"},a=()=>{n.find(".task-list").innerHTML=""};return{createProject:e=>{const t=n.find(".sidebar-list"),a=n.create("li"),o=n.create("a",{href:"#",classes:"sidebar-link",text:e.name});o.dataset.id=e.id,a.appendChild(o),t.appendChild(a)},createTask:e=>{const t=n.find(".task-list");let a=["task",(e=>1==e?"low-prio":3==e?"high-prio":"normal-prio")(e.priority)];e.complete&&a.push("complete");const o=n.create("li",{classes:a});o.dataset.task_id=e.id;const r=n.create("div",{classes:"task-header"}),i=n.create("div",{classes:"handle"}),s=n.create("i",{classes:"fas fa-thumbtack"}),l=n.create("div",{classes:"task-header-content"}),c=n.create("h3",{classes:"task-name",text:e.name}),d=n.create("div",{classes:"task-info"}),u=n.create("div",{classes:"task-due-date",text:e.dueDate}),p=n.create("button",{classes:"details-toggler",type:"button"}),h=n.create("div",{classes:"task-body"}),f=n.create("div",{classes:"task-details"}),g=n.create("div",{classes:"task-priority"}),v=n.create("p",{classes:"task-desc",text:e.desc}),m=n.create("div",{classes:"task-actions"}),b=n.create("label",{classes:"completion-indicator",text:"Complete"}),y=n.create("input",{classes:"hidden-checkbox",type:"checkbox",checked:e.complete}),_=n.create("div",{classes:"completion-checkbox"}),k=n.create("i",{classes:"fas fa-check"}),D=n.create("button",{classes:"delete-task-button",type:"button",text:"Delete"});D.dataset.target_task_id=e.id,t.appendChild(o),o.appendChild(r),o.appendChild(h),r.appendChild(i),i.appendChild(s),r.appendChild(l),l.appendChild(c),l.appendChild(d),d.appendChild(u),d.appendChild(p),h.appendChild(f),f.appendChild(g),f.appendChild(v),f.appendChild(m),m.appendChild(b),m.appendChild(D),b.appendChild(y),b.appendChild(_),_.appendChild(k)},destroyTask:e=>{const t=n.find(".task-list"),a=n.find(`[data-task_id='${e}']`);t.removeChild(a)},destroyProject:e=>{const t=n.find(".sidebar-list"),a=n.find(`[data-id='${e}']`).parentElement;t.removeChild(a)},clearProjectPanel:()=>{a(),n.find(".project-name u").textContent="[No project loaded]"},disableProjectPanel:()=>{n.findAll(".project button").forEach(e=>e.disabled=!0)},enableProjectPanel:()=>{n.findAll(".project button").forEach(e=>e.disabled=!1)},closeModal:e,openModal:e=>{let t=n.find(e);t.style.display="flex",setTimeout(()=>{t.classList.remove("hidden")},10)},resetProjectModal:()=>{e("#new-project-modal"),n.find("#new-project-form").reset()},resetTaskModal:()=>{e("#new-task-modal"),n.find("#new-task-form").reset(),t()},resetSliderLabel:t,clearTasks:a,closeSidebar:()=>{const e=n.find(".sidebar"),t=n.find(".menu-button");e.classList.add("collapsed"),t.classList.remove("open")},toggleSidebar:()=>{const e=n.find(".sidebar"),t=n.find(".menu-button");e.classList.toggle("collapsed"),t.classList.toggle("open")},updateProjectTitle:e=>{n.find(".project-name u").textContent=e.name,n.findAll(".sidebar-link").forEach(e=>e.classList.remove("active-sidebar-link")),n.find(`[data-id="${e.id}"]`).classList.add("active-sidebar-link")}}})();n.attachEvent(".menu-button",o.toggleSidebar),n.attachEvent(".details-toggler",e=>{n.findAncestor(e.target,"task").classList.toggle("show")},"click",!0),n.attachEvent("#priority-slider",e=>{let t=parseInt(e.target.value)-1,a=["Low","Normal","High"];const o=n.find("#priority-value");o.textContent=a[t],o.className=a[t].toLowerCase()+"-prio-color"},"input"),n.attachEvent("#close-task-modal",e=>{e.preventDefault(),o.closeModal("#new-task-modal")}),n.attachEvent(".new-task-button",e=>o.openModal("#new-task-modal")),n.attachEvent("#close-project-modal",e=>{e.preventDefault(),o.closeModal("#new-project-modal")}),n.attachEvent(".new-project-button",e=>o.openModal("#new-project-modal"));var r=(()=>{const e=()=>{try{let e=window.localStorage,t="__storage_test__";return e.setItem(t,t),e.removeItem(t),!0}catch(t){return t instanceof DOMException&&(22===t.code||1014===t.code||"QuotaExceededError"===t.name||"NS_ERROR_DOM_QUOTA_REACHED"===t.name)&&0!==e.length}};return{save:t=>{if(e()){let e=JSON.stringify(t);localStorage.setItem(`to-do.project-${t.id}`,e)}},load:t=>{let a;if(e()&&(a=localStorage.getItem(`to-do.project-${t}`)))return JSON.parse(a)},saveIndex:(t,a)=>{if(e()){let e=JSON.stringify(a);localStorage.setItem(`to-do.${t}-index`,e)}},loadIndex:t=>{let a;if(e()&&(a=localStorage.getItem(`to-do.${t}-index`)))return JSON.parse(a)},saveMeta:t=>{if(e()){let e=JSON.stringify(t);localStorage.setItem("to-do.meta",e)}},loadMeta:()=>{let t;if(e()&&(t=localStorage.getItem("to-do.meta")))return JSON.parse(t)},destroy:t=>{e()&&localStorage.removeItem(`to-do.project-${t}`)},saveLastOpen:t=>{if(e()){let e=JSON.stringify(t);localStorage.setItem("to-do.open",e)}},loadLastOpen:()=>{let t;if(e()&&(t=localStorage.getItem("to-do.open")))return JSON.parse(t)}}})();let i=r.loadIndex("task")||1;var s=(e,t,a,n,o,s=!1)=>{return{id:(()=>{let e=i;return r.saveIndex("task",++i),e})(),name:t,desc:a,dueDate:n,priority:o,complete:s,projectId:e}};let l=r.loadIndex("project")||1;const c=e=>{return{id:(()=>{let e=l;return r.saveIndex("project",++l),e})(),name:e,tasks:[]}},d=e=>{const t=t=>e.tasks.find(e=>e.id==t),a=t=>{(t=>e.tasks.find(e=>e.id==t.id))(t)||(t.projectId=e.id,e.tasks.push(t))},n=()=>r.save(e);return{id:e.id,name:e.name,tasks:e.tasks,findTask:t,add:a,remove:a=>{const o=e.tasks.indexOf(t(a));-1!==o&&(e.tasks.splice(o,1),n())},removeAll:()=>{e.tasks.forEach(e=>e.projectId=null),e.tasks.length=0},newTask:(t,o,r,i,l)=>{const c=s(e.id,t,o,r,i,l);return a(c),n(),c},save:n,destroy:()=>r.destroy(e.id)}};var u=(()=>{let e=r.loadMeta()||[];const t=()=>{r.saveMeta(e)};return{find:e=>d(r.load(e)),create:a=>{const n=(e=>d(c(e)))(a);return n.save(),e.push({id:n.id,name:n.name}),t(),n},meta:e,saveMeta:t,destroy:a=>{const n=e.indexOf(e.find(e=>e.id===a.id));e.splice(n,1),a.destroy(),t()}}})(),p=a(0),h=a.n(p);let f;n.attachEvent("#new-project-form",e=>{e.preventDefault(),v(),o.resetProjectModal()},"submit"),n.attachEvent("#new-task-form",e=>{e.preventDefault(),f?(m(),o.resetTaskModal()):alert("No project is loaded. Please create or load a project first.")},"submit"),n.attachEvent(".sidebar-link",e=>{e.preventDefault(),y(e.target.dataset.id)},"click",!0),n.attachEvent(".hidden-checkbox",e=>{let t=n.findAncestor(e.target,"task"),a=t.dataset.task_id;e.target.checked?(f.findTask(a).complete=!0,t.classList.add("complete")):e.target.checked||(f.findTask(a).complete=!1,t.classList.remove("complete")),f.save()},"change",!0),n.attachEvent(".delete-project-button",e=>{if(f&&confirm("Are you sure you want to delete this project and all of its tasks?")){const e=f.id;u.destroy(f),_(),o.destroyProject(e)}}),n.attachEvent(".delete-task-button",e=>{if(confirm("Are you sure you want to delete this task?")){const t=e.target.dataset.target_task_id;f.remove(t),o.destroyTask(t)}},"click",!0);h.a.create(n.find(".task-list"),{animation:150,delay:0,draggable:".task",dataIdAttr:"data-task_id",handle:".handle",onSort:e=>g(e)});const g=e=>{let t=f.tasks.splice(e.oldIndex,1)[0];f.tasks.splice(e.newIndex,0,t),f.save()},v=()=>{let e=u.create(document.forms.project.name.value);o.createProject(e),y(e.id)},m=()=>{let e=f.newTask(...b());o.createTask(e)},b=()=>{return[document.forms.task.name.value,document.forms.task.description.value,document.forms.task.due_date.value,parseInt(document.forms.task.priority.value)]},y=e=>{let t=u.find(e);r.saveLastOpen(e),f=t,o.enableProjectPanel(),k(t),o.updateProjectTitle(t),o.closeSidebar()},_=()=>{u.meta.length>0?y(u.meta[0].id):(o.disableProjectPanel(),o.clearProjectPanel())},k=e=>{o.clearTasks(),e.tasks.forEach(e=>o.createTask(e))};(()=>{u.meta.forEach(e=>o.createProject(e));const e=r.loadLastOpen();e?y(e):_()})()}]);